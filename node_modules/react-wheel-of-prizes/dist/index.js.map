{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react'\n\nconst WheelComponent = ({\n  segments,\n  segColors,\n  winningSegment,\n  onFinished,\n  primaryColor = 'black',\n  contrastColor = 'white',\n  buttonText = 'Spin',\n  isOnlyOnce = true,\n  size = 290,\n  upDuration = 100,\n  downDuration = 1000,\n  fontFamily = 'proxima-nova'\n}) => {\n  let currentSegment = ''\n  let isStarted = false\n  const [isFinished, setFinished] = useState(false)\n  let timerHandle = 0\n  const timerDelay = segments.length\n  let angleCurrent = 0\n  let angleDelta = 0\n  let canvasContext = null\n  let maxSpeed = Math.PI / `${segments.length}`\n  const upTime = segments.length * upDuration\n  const downTime = segments.length * downDuration\n  let spinStart = 0\n  let frames = 0\n  const centerX = 300\n  const centerY = 300\n  useEffect(() => {\n    wheelInit()\n    setTimeout(() => {\n      window.scrollTo(0, 1)\n    }, 0)\n  }, [])\n  const wheelInit = () => {\n    initCanvas()\n    wheelDraw()\n  }\n\n  const initCanvas = () => {\n    let canvas = document.getElementById('canvas')\n    console.log(navigator)\n    if (navigator.userAgent.indexOf('MSIE') !== -1) {\n      canvas = document.createElement('canvas')\n      canvas.setAttribute('width', 1000)\n      canvas.setAttribute('height', 600)\n      canvas.setAttribute('id', 'canvas')\n      document.getElementById('wheel').appendChild(canvas)\n    }\n    canvas.addEventListener('click', spin, false)\n    canvasContext = canvas.getContext('2d')\n  }\n  const spin = () => {\n    isStarted = true\n    if (timerHandle === 0) {\n      spinStart = new Date().getTime()\n      // maxSpeed = Math.PI / ((segments.length*2) + Math.random())\n      maxSpeed = Math.PI / segments.length\n      frames = 0\n      timerHandle = setInterval(onTimerTick, timerDelay)\n    }\n  }\n  const onTimerTick = () => {\n    frames++\n    draw()\n    const duration = new Date().getTime() - spinStart\n    let progress = 0\n    let finished = false\n    if (duration < upTime) {\n      progress = duration / upTime\n      angleDelta = maxSpeed * Math.sin((progress * Math.PI) / 2)\n    } else {\n      if (winningSegment) {\n        if (currentSegment === winningSegment && frames > segments.length) {\n          progress = duration / upTime\n          angleDelta =\n            maxSpeed * Math.sin((progress * Math.PI) / 2 + Math.PI / 2)\n          progress = 1\n        } else {\n          progress = duration / downTime\n          angleDelta =\n            maxSpeed * Math.sin((progress * Math.PI) / 2 + Math.PI / 2)\n        }\n      } else {\n        progress = duration / downTime\n        angleDelta = maxSpeed * Math.sin((progress * Math.PI) / 2 + Math.PI / 2)\n      }\n      if (progress >= 1) finished = true\n    }\n\n    angleCurrent += angleDelta\n    while (angleCurrent >= Math.PI * 2) angleCurrent -= Math.PI * 2\n    if (finished) {\n      setFinished(true)\n      onFinished(currentSegment)\n      clearInterval(timerHandle)\n      timerHandle = 0\n      angleDelta = 0\n    }\n  }\n\n  const wheelDraw = () => {\n    clear()\n    drawWheel()\n    drawNeedle()\n  }\n\n  const draw = () => {\n    clear()\n    drawWheel()\n    drawNeedle()\n  }\n\n  const drawSegment = (key, lastAngle, angle) => {\n    const ctx = canvasContext\n    const value = segments[key]\n    ctx.save()\n    ctx.beginPath()\n    ctx.moveTo(centerX, centerY)\n    ctx.arc(centerX, centerY, size, lastAngle, angle, false)\n    ctx.lineTo(centerX, centerY)\n    ctx.closePath()\n    ctx.fillStyle = segColors[key]\n    ctx.fill()\n    ctx.stroke()\n    ctx.save()\n    ctx.translate(centerX, centerY)\n    ctx.rotate((lastAngle + angle) / 2)\n    ctx.fillStyle = contrastColor\n    ctx.font = 'bold 1em ' + fontFamily\n    ctx.fillText(value.substr(0, 21), size / 2 + 20, 0)\n    ctx.restore()\n  }\n\n  const drawWheel = () => {\n    const ctx = canvasContext\n    let lastAngle = angleCurrent\n    const len = segments.length\n    const PI2 = Math.PI * 2\n    ctx.lineWidth = 1\n    ctx.strokeStyle = primaryColor\n    ctx.textBaseline = 'middle'\n    ctx.textAlign = 'center'\n    ctx.font = '1em ' + fontFamily\n    for (let i = 1; i <= len; i++) {\n      const angle = PI2 * (i / len) + angleCurrent\n      drawSegment(i - 1, lastAngle, angle)\n      lastAngle = angle\n    }\n\n    // Draw a center circle\n    ctx.beginPath()\n    ctx.arc(centerX, centerY, 50, 0, PI2, false)\n    ctx.closePath()\n    ctx.fillStyle = primaryColor\n    ctx.lineWidth = 10\n    ctx.strokeStyle = contrastColor\n    ctx.fill()\n    ctx.font = 'bold 1em ' + fontFamily\n    ctx.fillStyle = contrastColor\n    ctx.textAlign = 'center'\n    ctx.fillText(buttonText, centerX, centerY + 3)\n    ctx.stroke()\n\n    // Draw outer circle\n    ctx.beginPath()\n    ctx.arc(centerX, centerY, size, 0, PI2, false)\n    ctx.closePath()\n\n    ctx.lineWidth = 10\n    ctx.strokeStyle = primaryColor\n    ctx.stroke()\n  }\n\n  const drawNeedle = () => {\n    const ctx = canvasContext\n    ctx.lineWidth = 1\n    ctx.strokeStyle = contrastColor\n    ctx.fileStyle = contrastColor\n    ctx.beginPath()\n    ctx.moveTo(centerX + 20, centerY - 50)\n    ctx.lineTo(centerX - 20, centerY - 50)\n    ctx.lineTo(centerX, centerY - 70)\n    ctx.closePath()\n    ctx.fill()\n    const change = angleCurrent + Math.PI / 2\n    let i =\n      segments.length -\n      Math.floor((change / (Math.PI * 2)) * segments.length) -\n      1\n    if (i < 0) i = i + segments.length\n    ctx.textAlign = 'center'\n    ctx.textBaseline = 'middle'\n    ctx.fillStyle = primaryColor\n    ctx.font = 'bold 1.5em ' + fontFamily\n    currentSegment = segments[i]\n    isStarted && ctx.fillText(currentSegment, centerX + 10, centerY + size + 50)\n  }\n  const clear = () => {\n    const ctx = canvasContext\n    ctx.clearRect(0, 0, 1000, 800)\n  }\n  return (\n    <div id='wheel'>\n      <canvas\n        id='canvas'\n        width='1000'\n        height='800'\n        style={{\n          pointerEvents: isFinished && isOnlyOnce ? 'none' : 'auto'\n        }}\n      />\n    </div>\n  )\n}\nexport default WheelComponent\n"],"names":["WheelComponent","segments","segColors","winningSegment","onFinished","primaryColor","contrastColor","buttonText","isOnlyOnce","size","upDuration","downDuration","fontFamily","currentSegment","isStarted","useState","isFinished","setFinished","timerHandle","timerDelay","length","angleCurrent","angleDelta","canvasContext","maxSpeed","Math","PI","upTime","downTime","spinStart","frames","centerX","centerY","useEffect","wheelInit","setTimeout","window","scrollTo","initCanvas","wheelDraw","canvas","document","getElementById","console","log","navigator","userAgent","indexOf","createElement","setAttribute","appendChild","addEventListener","spin","getContext","Date","getTime","setInterval","onTimerTick","draw","duration","progress","finished","sin","clearInterval","clear","drawWheel","drawNeedle","drawSegment","key","lastAngle","angle","ctx","value","save","beginPath","moveTo","arc","lineTo","closePath","fillStyle","fill","stroke","translate","rotate","font","fillText","substr","restore","len","PI2","lineWidth","strokeStyle","textBaseline","textAlign","i","fileStyle","change","floor","clearRect","React","pointerEvents"],"mappings":"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"}